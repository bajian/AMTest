<!DOCTYPE html>
<html>
<head>
  <title>banner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://rawgit.com/bajian/AMTest/master/assets/css/amazeui.min.css"/>
  <style type="text/css">
    .am-slider-d3 .am-control-thumbs {
      display: table;
    }

    .am-slider-d3 .am-control-thumbs li {
      display: table-cell;
    }
    .am-slider-d3 .am-control-thumbs li {
      display: table-cell;
      width: 1%;
    }
    .banner-img{max-height: 400px}
  </style>
</head>
<body style="margin: 3px">


  <div data-am-flexslider id="banner_container"  class="am-slider am-slider-default"  >
    <ul class="am-slides">
      <li data-thumb="http://7xkaou.com2.z0.glb.qiniucdn.com/bxjbgmin.png">
        <img fid="f_bg" class="banner-img" src="http://7xkaou.com2.z0.glb.qiniucdn.com/bxjbgmin.png" /></li>
      </ul>
    </div>

    <div style="display: none" id="myImgContainer">
      <figure id="myfigure" data-am-widget="figure" class="am am-figure am-figure-default hide"
      data-am-figure="{  pureview: 'true' }">
      <img id="myImg" src="http://7xkaou.com2.z0.glb.qiniucdn.com/bxjbgmin.png"
      data-rel="http://7xkaou.com2.z0.glb.qiniucdn.com/bxjbgmin.png" alt=""
      />
    </figure>
  </div>

  <script src="https://rawgit.com/bajian/AMTest/master/assets/js/jquery.min.js"></script>
  <script src="https://rawgit.com/bajian/AMTest/master/assets/js/amazeui.min.js"></script>

  <script type="text/javascript">

var picMaxLen=4;//最大图片数

var Bn=(function(){
  var Banner=function(){
    this._banner=$('#banner_container');
  }

  Banner.prototype.addBanner=function(src,value){
    var len=this._banner.flexslider('count');
      if(len>=picMaxLen) this._banner.flexslider('removeSlide', len-1);//移除最初的
      var li='<li data-thumb="'+src+'"><img class="banner-img" src="'+src+'" fv="'+value+'"><div class="am-slider-desc"><small class="am-slider-title">'+value+'</small></div></li>';
      this._banner.flexslider('addSlide', li,0);
    }

    Banner.prototype.showFigure=function(src){
      $('#myfigure').remove();
      var fg='<figure id="myfigure" data-am-widget="figure" class="am am-figure am-figure-default " data-am-figure="{pureview:\'true\'}"><img id="fgimg" src="'+src+'"/></figure>';
      $('#myImgContainer').append(fg);
      $.AMUI.figure.init();
      $('#fgimg').click();
    }

    return new Banner();

  })();


  setTimeout(function(){
  Bn.addBanner('http://s.amazeui.org/media/i/demos/bing-2.jpg','2','2');
  Bn.addBanner('http://s.amazeui.org/media/i/demos/bing-3.jpg','3','3');
  Bn.addBanner('http://s.amazeui.org/media/i/demos/bing-4.jpg','4','4');
  Bn.addBanner('http://s.amazeui.org/media/i/demos/bing-1.jpg','5','5');


},1000); 


$(document).on('click', '.banner-img', function () {
  Bn.showFigure(this.src);
    });
</script>

</body>
</html>
